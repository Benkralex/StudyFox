<!--"blockquote", "code"-->
<!DOCTYPE html>
<html lang="en">
<head>
    <title>StudyFox | Verwaltung</title>
    <style>
        #editor {
            min-height: 300px;
            border: 1px solid #ced4da;
            padding: 10px;
            background-color: white;
        }
    </style>
  {% include 'navbar.html' %}
  <div class="container mt-5">
    <h1>Neues Thema erstellen</h1>

    <div class="btn-toolbar mb-2" role="toolbar">
        <div class="me-2">
            <button class="btn" onclick="execCmd('bold')"><img src="/static/format_bold.svg" title="Bold"></button>
            <button class="btn" onclick="execCmd('italic')"><img src="/static/format_italic.svg" title="Italic"></button>
            <button class="btn" onclick="execCmd('underline')"><img src="/static/format_underlined.svg" title="Underline"></button>
            <button class="btn" onclick="execCmd('insertUnorderedList')"><img src="/static/format_list_bulleted.svg" title="List"></button>
            <button class="btn" onclick="execCmd('createLink')"><img src="/static/add_link.svg" title="Link"></button>
            <button class="btn" onclick="execCmd('insertImage')"><img src="/static/image.svg" title="Image"></button>
            <button class="btn" onclick="execCmd('subscript')"><img src="/static/subscript.svg" title="Subscript"></button>
            <button class="btn" onclick="execCmd('superscript')"><img src="/static/superscript.svg" title="Superscript"></button>
            <button class="btn" onclick="execCmd('insertHTML', '<hr>')"><img src="/static/horizontal_rule.svg" title="Horizontal Rule"></button>
            <button class="btn" onclick="execCmd('formatBlock', 'pre')"><img src="/static/code.svg" title="Code"></button>
            <button class="btn" onclick="insertTable()"><img src="/static/table.svg" title="Table"></button>
            <button class="btn" onclick="execCmd('formatBlock', 'blockquote')"><img src="/static/format_quote.svg" title="Quote"></button>
        </div>
    </div>

    <div id="editor" contenteditable="true" class="form-control">
        <p>Fange hier an zu schreiben...</p>
    </div>
    <br>
    <form action="/administration/topics/new" method="post">
        <label for="title">Title</label>
        <input name="title" id="title" class="form-control" required>
        <input type="hidden" name="content" id="content" class="form-control" required>
        <label for="subject">Fach</label>
        <select name="subject" id="subject" class="form-control">
            {% for subject in subjects %}
              <option value="{{subject.id}}">{{subject.name}}</option>
            {% endfor %}
        </select>
        <button class="btn btn-primary mt-2" type="submit">Thema erstellen</button>
    </form>
</div>
    <script>
        function execCmd(command, value = null) {
    if (['hr'].includes(command)) {
        document.execCommand('insertHTML', false, `<${command}>${value || ''}</${command}>`);
    } else {
        if (command === 'createLink') {
            value = prompt('Enter the link URL:', 'https://');
        } else if (command === 'insertImage') {
            value = prompt('Enter the image URL:', 'https://');
            if (value) {
                const alt = prompt('Enter alt text:', '');
                const width = prompt('Enter width (optional):', '');
                const height = prompt('Enter height (optional):', '');
                value = `${value}" alt="${alt}" ${width ? 'width="' + width + '"' : ''} ${height ? 'height="' + height + '"' : ''}`;
                command = 'insertHTML';
                value = `<img src="${value}"/>`;
            }
        }
        document.execCommand(command, false, value);
    }
    document.getElementById("content").value = document.getElementById("editor").innerHTML;
}
        document.getElementById("editor").addEventListener("input", function() {
            document.getElementById("content").value = document.getElementById("editor").innerHTML
        });
        document.getElementById("content").value = document.getElementById("editor").innerHTML
    </script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>
</body>
</html>
